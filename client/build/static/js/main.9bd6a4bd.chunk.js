(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/book-shop.a5f0bf8f.png"},33:function(e,t,a){e.exports=a.p+"static/media/border.16a5fbb5.png"},34:function(e,t,a){e.exports=a.p+"static/media/book.fcf28b87.png"},36:function(e,t,a){e.exports=a(59)},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=a(4),u=a(5),s=a.n(u),i=a(8),m=a(3),d=function(e){var t=e.onChange,a=e.fieldValue,n=e.type,o=e.value,c=e.labelCaption,l="input ".concat(a);return r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:l,id:a,type:n,name:a,onChange:t,value:o}),r.a.createElement("label",{htmlFor:a},c))},p=function(e){var t=e.token,a=e.userId;return t&&localStorage.setItem("user_data",JSON.stringify({token:t,userId:a})),{type:"FETCH_LOGIN_DATA",payload:e}},f=function(e){return{type:"FETCH_REGISTER_DATA",payload:e}},E=function(){return localStorage.removeItem("user_data"),{type:"LOGOUT"}},b=function(e){return{type:"FETCH_BOOK_CREATED",payload:e}},v=function(e){return{type:"FETCH_BOOKS",payload:e}},h=function(e,t){return{type:"BOOK_ADDED_TO_CART_FROM_SERVER",payload:{_id:e,count:t}}},O=function(){return{type:"CART_RESET"}},g=function(e){return{type:"BOOK_DELETED_FROM_CART",payload:e}},k=function(e){return{type:"FETCH_ORDERS",payload:e}},y=function(e){return{type:"FETCH_FAILURE",payload:e}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(){var r=Object(i.a)(s.a.mark((function r(o){var c,l,u,i,m,d,O;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c=_())&&(l=c.token,n.authorization="Bearer ".concat(l)),t&&(t=JSON.stringify(t),n["Content-Type"]="application/json"),t&&"DELETE"!==a&&(a="POST"),o({type:"FETCH_REQUEST"}),r.next=7,fetch(e,{method:a,body:t,headers:n});case 7:return u=r.sent,r.next=10,u.json();case 10:if(i=r.sent,m=u.status,d=i.message,O=i.hideMessage,401===m&&"Token is not valid!"===d&&o(E()),400!==m&&401!==m){r.next=18;break}return r.abrupt("return",o(y(d)));case 18:if(o({type:"FETCH_SUCCESS"}),200!==m||"You entered!"!==O){r.next=21;break}return r.abrupt("return",o(p(i)));case 21:if(201!==m||"User created. Verify user on your email"!==d){r.next=23;break}return r.abrupt("return",o(f(i)));case 23:if(201!==m||"book created"!==O){r.next=25;break}return r.abrupt("return",o(b(i)));case 25:if(200!==m||"books"!==d){r.next=27;break}return r.abrupt("return",o(v(i)));case 27:if(201!==m||"Order added"!==d){r.next=29;break}return r.abrupt("return",o({type:"CART_RESET"}));case 29:if(200!==m||"user's orders"!==d){r.next=31;break}return r.abrupt("return",o(k(i)));case 31:200===m&&"cart"===d&&i.cart.forEach((function(e){var t=e.count,a=e.bookId;return o(g(a)),o(h(a,t))}));case 33:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};function _(){var e=localStorage.getItem("user_data");return JSON.parse(e)}var D=function(e){window.M&&e&&window.M.toast({html:e})},C=Object(m.b)((function(e){var t=e.booksData,a=t.title,n=t.author,r=t.price,o=t.coverImage,c=t.responseMessage,l=e.download;return{title:a,author:n,price:r,coverImage:o,isLoading:l.isLoading,isError:l.isError,responseMessage:c}}),(function(e){return{fetchData:function(t,a,n,r){return e(T(t,a,n,r))},updTitle:function(t){return e({type:"TITLE_UPDATE",payload:t.target.value})},updAuthor:function(t){return e({type:"AUTHOR_UPDATE",payload:t.target.value})},updPrice:function(t){return e({type:"PRICE_UPDATE",payload:t.target.value})},updCoverImage:function(t){return e({type:"COVER_IMAGE_UPDATE",payload:t.target.value})}}}))((function(e){var t=e.title,a=e.author,o=e.price,c=e.coverImage,l=e.isLoading,u=e.updTitle,m=e.updPrice,p=e.updAuthor,f=e.updCoverImage,E=e.fetchData,b=e.isError,v=e.responseMessage;Object(n.useEffect)((function(){D(b)}),[b]),Object(n.useEffect)((function(){D(v)}),[v]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var h=function(){var e=Object(i.a)(s.a.mark((function e(t,a,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E("/create_book",{title:t,author:a,price:n,coverImage:r});case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s1"},r.a.createElement("h3",null,"Add book to data base"),r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"Create your book"),r.a.createElement("div",null,r.a.createElement(d,{fieldValue:"title",type:"text",value:t,onChange:u,labelCaption:"Title"}),r.a.createElement(d,{fieldValue:"author",type:"text",value:a,onChange:p,labelCaption:"Author"}),r.a.createElement(d,{fieldValue:"price",type:"number",value:o,onChange:m,labelCaption:"Price"}),r.a.createElement(d,{fieldValue:"coverImage",type:"text",value:c,onChange:f,labelCaption:"Image"}))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn yellow darken-4",style:{marginRight:"10px"},disabled:l,onClick:function(){h(t,a,o,c)}},"Create")))))})),j=a(18),w=a(19),N=a(23),I=a(21),A=(a(46),function(e){Object(N.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onWriteToCart=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.map((function(e){return{bookId:e._id,count:e.count}})),t.next=3,e.props.fetchData("/write_to_cart",{writeToCartArray:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCreateOrder=function(t,a){var n=t.map((function(e){return{bookId:e._id,count:e.count,total:e.total}}));return e.props.fetchData("/create_order",{books:n,totalPrice:a})},e}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(e){e.items!==this.props.items&&this.onWriteToCart(this.props.items)}},{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.total,o=t.onIncrease,c=t.onDecrease,l=t.onDelete;return r.a.createElement("div",{className:"shopping-cart-table"},r.a.createElement("h3",null,"Your Cart"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u2116"),r.a.createElement("th",null,"Item"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,a.map((function(e,t){var a=e._id,n=e.title,u=e.count,s=e.total;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t+1),r.a.createElement("td",null,n),r.a.createElement("td",null,u),r.a.createElement("td",null,s),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return o(a)},className:"btn btn-success"},r.a.createElement("i",{className:"fa fa-plus-circle"})),r.a.createElement("button",{onClick:function(){return c(a)},className:"btn btn-warning btn-sm"},r.a.createElement("i",{className:"fa fa-minus-circle"})),r.a.createElement("button",{onClick:function(){return l(a)},className:"btn btn-danger btn-sm"},r.a.createElement("i",{className:"fa fa-trash-o"}))))})))),r.a.createElement("div",{className:"total"},"Total: $",n),r.a.createElement("button",{disabled:!a.length,onClick:function(){e.onCreateOrder(a,n)},className:"btn btn-order btn-sm waves-effect waves-light"},r.a.createElement("i",{className:"fa fa-gift"})," make the order"))}}]),a}(r.a.Component)),R=Object(m.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),(function(e){return{onIncrease:function(t){return e(function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}}(t))},onDecrease:function(t){return e(function(e){return{type:"BOOK_DECREASED_FROM_CART",payload:e}}(t))},onDelete:function(t){return e(g(t))},fetchData:function(t,a,n,r){return e(T(t,a,n,r))}}}))(A),S=function(){return r.a.createElement("div",null,r.a.createElement(R,null))},x=a(32),L=a.n(x),M=(a(47),Object(m.b)(null,(function(e){return{fetchData:function(t,a,n,r){return e(T(t,a,n,r))}}}))((function(e){var t=e.fetchData;return Object(n.useEffect)((function(){t("/books")}),[]),r.a.createElement("div",null,r.a.createElement("img",{src:L.a,alt:"bookShop_icon",className:"icon-book-shop"}))}))),F=a(33),P=a.n(F),U=(a(48),Object(m.b)((function(e){var t=e.authData,a=t.email,n=t.password,r=t.responseMessage,o=t.token,c=e.download;return{email:a,password:n,isLoading:c.isLoading,isError:c.isError,responseMessage:r,token:o}}),(function(e){return{updEmail:function(t){return e({type:"EMAIL_UPDATE",payload:t.target.value})},updPassword:function(t){return e({type:"PASSWORD_UPDATE",payload:t.target.value})},fetchData:function(t,a,n,r){return e(T(t,a,n,r))}}}))((function(e){var t=e.email,a=e.password,o=e.updEmail,c=e.updPassword,l=e.fetchData,u=e.isLoading,m=e.isError,p=e.responseMessage;Object(n.useEffect)((function(){D(m)}),[m]),Object(n.useEffect)((function(){D(p)}),[p]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var f=function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("/login",{email:t,password:a});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("/register",{email:t,password:a});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 offset-s2"},r.a.createElement("h2",null,"Sign in or register"),r.a.createElement("div",{className:"card blue-grey darken-1 card-register"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title sign"},"Sign in/Sign up"),r.a.createElement("div",null,r.a.createElement(d,{fieldValue:"email",type:"text",value:t,onChange:o,labelCaption:"Email"}),r.a.createElement(d,{fieldValue:"password",type:"password",value:a,onChange:c,labelCaption:"Password"}))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn yellow darken-4 btn-login",disabled:u,onClick:function(){f(t,a)}},"Sign in"),r.a.createElement("button",{className:"btn light-blue darken-4",onClick:function(){E(t,a)},disabled:u},"Register")))),r.a.createElement("img",{src:P.a,alt:"border_icon",className:"icon-fence"}))}))),B=(a(49),function(e){var t=e.book,a=e.onAddedToCart,n=t.title,o=t.author,c=t.price,l=t.coverImage;return r.a.createElement("div",{className:"book-list-item"},r.a.createElement("div",{className:"book-cover"},r.a.createElement("img",{className:"book-image",src:l,alt:"cover"})),r.a.createElement("div",{className:"book-details"},r.a.createElement("span",{href:"#",className:"book-title"},n),r.a.createElement("div",{className:"book-author"},o),r.a.createElement("div",{className:"book-price"},"$",c),r.a.createElement("button",{onClick:a,className:"btn-bookList waves-effect waves-light  light-blue darken-3"},"Add to cart")))}),H=(a(50),function(e){Object(N.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onWriteToCart=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.map((function(e){return{bookId:e._id,count:e.count}})),t.next=3,e.props.fetchData("/write_to_cart",{writeToCartArray:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.bookList=e.props.books.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement(B,{book:t,onAddedToCart:function(){e.props.addedToCart(t._id)}}))})),e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchData("/books")}},{key:"componentDidUpdate",value:function(e){e.items!==this.props.items&&this.onWriteToCart(this.props.items)}},{key:"render",value:function(){return r.a.createElement("div",{className:"bookList"},this.props.books?this.bookList:null)}}]),a}(n.Component)),K=Object(m.b)((function(e){var t=e.booksData.books,a=e.download;return{books:t,isLoading:a.isLoading,isError:a.isError,items:e.shoppingCart.cartItems}}),(function(e){return{fetchData:function(t,a,n,r){return e(T(t,a,n,r))},addedToCart:function(t){return e({type:"BOOK_ADDED_TO_CART",payload:t})}}}))(H),V=function(){return r.a.createElement("div",null,r.a.createElement(K,null))},G=(a(51),function(e){var t=e.order,a=e.onDeleteOrderItem,n=new Date(t.date).toLocaleDateString(),o=new Date(t.date).toLocaleTimeString(),c=t.books.map((function(e,a){return console.log(t._id),r.a.createElement("div",{key:e._id},r.a.createElement("p",null,"Book: ",e.bookId.title),r.a.createElement("p",null,"Author: ",e.bookId.author),r.a.createElement("p",null,"Count: ",e.count),r.a.createElement("p",null,"Price: ",e.total),r.a.createElement("hr",null))}));return r.a.createElement("div",{className:"row card-order"},r.a.createElement("div",{className:"col s12 m2"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"Order's Date: ",n),r.a.createElement("span",{className:"card-title"},"Time: ",o),r.a.createElement("hr",null),c,r.a.createElement("div",{className:"total-price"},r.a.createElement("h6",null,r.a.createElement("i",null,"Total price: $",t.totalPrice)))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{onClick:function(){return a(t._id)},className:"btn btn-danger btn-sm"},r.a.createElement("i",{className:"fa fa-trash-o"}),"Delete")))))}),J=(a(52),Object(m.b)((function(e){var t=e.ordersData.orders,a=e.download;return{orders:t,isLoading:a.isLoading,isError:a.isError}}),(function(e){return{fetchData:function(t,a,n,r){return e(T(t,a,n,r))}}}))((function(e){var t=e.fetchData,a=e.orders;Object(n.useEffect)((function(){t("/orders")}),[]);var o=function(e){t("/deleteOrderItem",{orderItemId:e},"DELETE")},c=a.reverse().map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(G,{order:e,onDeleteOrderItem:o}))})),l=r.a.createElement("div",null,r.a.createElement("h1",null,"You have no orders yet!"));return r.a.createElement("div",{className:"orderList"},a.length?c:l)}))),W=function(){return r.a.createElement("div",null,r.a.createElement(J,null))},$=a(6),Y=a(34),q=a.n(Y),Q=(a(54),a(22)),z=(a(55),Object(m.b)((function(e){var t=e.shoppingCart,a=t.cartItems,n=t.orderTotal,r=t.numItems;return{books:a.length,total:n,numItems:r}}))((function(e){var t=e.books,a=e.total,o=e.numItems,c=Object(n.useState)(!1),l=Object(Q.a)(c,2),u=l[0],s=l[1],i=r.a.createElement("div",{className:"shopping-cart"},r.a.createElement("i",{className:"cart-icon navbar-fa-icons fa fa-shopping-cart"}),r.a.createElement("span",null,t,"\xa0",1===t||0===t?"book":"books","\xa0 - ",o,"\xa0",1===o||0===o?"item":"items"),r.a.createElement("span",null," ($",a,") ")),m=r.a.createElement("div",null,r.a.createElement("i",{className:"cart-icon navbar-fa-icons fa fa-shopping-cart"}),"Cart");return r.a.createElement("header",{className:"shop-header"},r.a.createElement($.b,{to:"/cart",onClick:function(){return s(!0)}},u?i:m))}))),X=Object(m.b)(null,{logout:E,cartReset:O})((function(e){var t=e.logout,a=e.cartReset,n=Object(l.g)(),o=function(){var e=Object(i.a)(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),a(),t(),n.push("/auth");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement($.c,{to:"/logout",onClick:o}," ",r.a.createElement("i",{className:"navbar-fa-icons fa fa-sign-out"})," Logout")})),Z=Object(m.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),{fetchData:T})((function(e){var t=e.fetchData;return Object(n.useEffect)((function(){t("/books").then((function(){t("/getCart")}))}),[]),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper  blue-grey darken-3"},r.a.createElement("span",{href:"#",className:"brand-logo"},"BStore"),r.a.createElement("img",{src:q.a,alt:"book_icon"}),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(z,null)),r.a.createElement("li",null,r.a.createElement($.c,{to:"/books"}," ",r.a.createElement("i",{className:"navbar-fa-icons fa fa-book"})," Books")),r.a.createElement("li",null,r.a.createElement($.c,{to:"/create_book"},r.a.createElement("i",{className:"navbar-fa-icons fa fa-pencil-square-o"})," Create book")),r.a.createElement("li",null,r.a.createElement($.c,{to:"/orders"},r.a.createElement("i",{className:"navbar-fa-icons fa fa-building"})," Orders")),r.a.createElement("li",null,r.a.createElement(X,null)))))})),ee=(a(56),function(){var e=Object(n.useState)(!0),t=Object(Q.a)(e,2),a=t[0],o=t[1],c=["burger","fa"],l=["menu-items"];a?(c.push("fa-bars","closeBM"),l.push("closeM")):c.push("fa-times","openBM");var u=r.a.createElement("div",{className:l.join(" ")},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(z,null)),r.a.createElement("li",null,r.a.createElement($.c,{to:"/books"}," ",r.a.createElement("i",{className:"navbar-fa-icons fa fa-book"})," Books")),r.a.createElement("li",null,r.a.createElement($.c,{to:"/create_book"},r.a.createElement("i",{className:"navbar-fa-icons fa fa-pencil-square-o"})," Create book")),r.a.createElement("li",null,r.a.createElement($.c,{to:"/orders"},r.a.createElement("i",{className:"navbar-fa-icons fa fa-building"})," Orders")),r.a.createElement(X,null)));return r.a.createElement("div",null,r.a.createElement("i",{className:c.join(" "),onClick:function(){o(!a)}}),u)});a(57);var te=Object(m.b)((function(e){return{token:e.authData.token}}),(function(e){return{setToken:function(t){return e(function(e){return{type:"SET_TOKEN",payload:e}}(t))}}}))((function(e){var t=e.setToken,a=e.token;e.fetchData,Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user_data"));e&&e.token&&t(e.token)}),[]);var o=!!a?r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/title",exact:!0},r.a.createElement(M,null)),r.a.createElement(l.b,{path:"/cart",exact:!0},r.a.createElement(S,null)),r.a.createElement(l.b,{path:"/create_book",exact:!0},r.a.createElement(C,null)),r.a.createElement(l.b,{path:"/books",exact:!0},r.a.createElement(V,null)),r.a.createElement(l.b,{path:"/orders",exact:!0},r.a.createElement(W,null)),r.a.createElement(l.a,{to:"/title"})):r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/title",exact:!0},r.a.createElement(M,null)),r.a.createElement(l.b,{path:"/auth",exact:!0},r.a.createElement(U,null)),r.a.createElement(l.a,{to:"/auth"}));return r.a.createElement("div",null,a?r.a.createElement(Z,null):null,a?r.a.createElement(ee,null):null,r.a.createElement("div",{className:"container"},o))})),ae=a(14),ne=a(1),re=function(e,t){if(void 0===e)return{email:"",password:"",token:null,userId:null,responseMessage:null};switch(t.type){case"EMAIL_UPDATE":var a=e.authData.password;return Object(ne.a)(Object(ne.a)({},e.authData),{},{email:t.payload,password:a});case"PASSWORD_UPDATE":var n=e.authData.email;return Object(ne.a)(Object(ne.a)({},e.authData),{},{email:n,password:t.payload});case"FETCH_LOGIN_DATA":var r=t.payload,o=r.message,c=r.token,l=r.userId;return Object(ne.a)(Object(ne.a)({},e.authData),{},{token:c,userId:l,responseMessage:o});case"FETCH_REGISTER_DATA":var u=t.payload.message;return Object(ne.a)(Object(ne.a)({},e.authData),{},{responseMessage:u,email:"",password:""});case"SET_TOKEN":var s=t.payload;return Object(ne.a)(Object(ne.a)({},e.authData),{},{token:s});case"LOGOUT":return Object(ne.a)(Object(ne.a)({},e.authData),{},{token:null,email:"",password:""});default:return e.authData}},oe=function(e,t){if(void 0===e)return{isLoading:!1,isError:null};switch(t.type){case"FETCH_REQUEST":return{isLoading:!0,isError:null};case"FETCH_SUCCESS":return{isLoading:!1,isError:null};case"FETCH_FAILURE":return{isLoading:!1,isError:t.payload};default:return e.download}},ce=function(e,t){if(void 0===e)return{books:[],title:"",author:"",price:0,coverImage:"",responseMessage:null};switch(t.type){case"FETCH_BOOK_CREATED":var a=t.payload.message;return Object(ne.a)(Object(ne.a)({},e.booksData),{},{title:"",author:"",price:0,coverImage:"",responseMessage:a});case"FETCH_BOOKS":var n=t.payload.books;return Object(ne.a)(Object(ne.a)({},e.booksData),{},{books:n});case"TITLE_UPDATE":return Object(ne.a)(Object(ne.a)({},e.booksData),{},{title:t.payload});case"AUTHOR_UPDATE":return Object(ne.a)(Object(ne.a)({},e.booksData),{},{author:t.payload});case"PRICE_UPDATE":return Object(ne.a)(Object(ne.a)({},e.booksData),{},{price:t.payload});case"COVER_IMAGE_UPDATE":return Object(ne.a)(Object(ne.a)({},e.booksData),{},{coverImage:t.payload});default:return e.booksData}},le=a(24),ue=function(e,t){return e.booksData.books.find((function(e){return e._id===t}))},se=function(e,t,a){var n,r=t._id,o=t.title,c=t.price,l=e.shoppingCart,u=l.cartItems,s=l.orderTotal,i=l.numItems,m=u.findIndex((function(e){return e._id===r}));return-1!==m?0===(n={_id:(n=u[m])._id,title:n.title,count:n.count+a,total:n.total+a*c}).count?ie(e,n._id):{orderTotal:s+a*c,cartItems:[].concat(Object(le.a)(u.slice(0,m)),[n],Object(le.a)(u.slice(m+1))),numItems:i+a}:(n={_id:r,title:o,count:a,total:a*c},{orderTotal:s+a*c,cartItems:[].concat(Object(le.a)(u),[n]),numItems:i+a})},ie=function(e,t){var a=e.shoppingCart,n=a.cartItems,r=a.orderTotal,o=a.numItems,c=n.find((function(e){return e._id===t}));if(c){var l=n.filter((function(e){return e._id!==t}));return{orderTotal:r-c.total,cartItems:l,numItems:o-c.count}}return e.shoppingCart},me=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0,numItems:0};switch(t.type){case"BOOK_ADDED_TO_CART":var a=ue(e,t.payload);return se(e,a,1);case"BOOK_DECREASED_FROM_CART":var n=ue(e,t.payload);return se(e,n,-1);case"BOOK_DELETED_FROM_CART":return ie(e,t.payload);case"BOOK_ADDED_TO_CART_FROM_SERVER":var r=t.payload,o=r._id,c=r.count,l=ue(e,o);return se(e,l,c);case"CART_RESET":return{cartItems:[],orderTotal:0,numItems:0};default:return e.shoppingCart}},de=function(e,t){if(void 0===e)return{orders:[],responseMessage:null};switch(t.type){case"FETCH_ORDERS":var a=t.payload.orders;return Object(ne.a)(Object(ne.a)({},e.ordersData),{},{orders:a});default:return e.ordersData}},pe=function(e,t){return{authData:re(e,t),download:oe(e,t),booksData:ce(e,t),shoppingCart:me(e,t),ordersData:de(e,t)}},fe=a(35),Ee=Object(ae.c)(pe,Object(ae.a)(fe.a));a(58);c.a.render(r.a.createElement(m.a,{store:Ee},r.a.createElement($.a,null,r.a.createElement(te,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.9bd6a4bd.chunk.js.map